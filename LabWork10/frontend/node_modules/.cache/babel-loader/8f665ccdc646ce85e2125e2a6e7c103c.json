{"remainingRequest":"/home/muhammadjon/Documents/Web-Course/WebCourse10/frontend/node_modules/babel-loader/lib/index.js!/home/muhammadjon/Documents/Web-Course/WebCourse10/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/muhammadjon/Documents/Web-Course/WebCourse10/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/muhammadjon/Documents/Web-Course/WebCourse10/frontend/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/muhammadjon/Documents/Web-Course/WebCourse10/frontend/src/App.vue","mtime":1576834488142},{"path":"/home/muhammadjon/Documents/Web-Course/WebCourse10/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/muhammadjon/Documents/Web-Course/WebCourse10/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/muhammadjon/Documents/Web-Course/WebCourse10/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/muhammadjon/Documents/Web-Course/WebCourse10/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiL2hvbWUvbXVoYW1tYWRqb24vRG9jdW1lbnRzL1dlYi1Db3Vyc2UvV2ViQ291cnNlMTAvZnJvbnRlbmQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEhlYWRlciBmcm9tICcuL2NvbXBvbmVudHMvSGVhZGVyJzsKaW1wb3J0IE1pZGRsZSBmcm9tICcuL2NvbXBvbmVudHMvTWlkZGxlJzsKaW1wb3J0IEZvb3RlciBmcm9tICcuL2NvbXBvbmVudHMvRm9vdGVyJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdhcHAnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyOiBudWxsLAogICAgICBwb3N0czogW10sCiAgICAgIHVzZXJzOiBbXQogICAgfTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIEhlYWRlcjogSGVhZGVyLAogICAgTWlkZGxlOiBNaWRkbGUsCiAgICBGb290ZXI6IEZvb3RlcgogIH0sCiAgYmVmb3JlQ3JlYXRlOiBmdW5jdGlvbiBiZWZvcmVDcmVhdGUoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIGF4aW9zLmdldCgiL2FwaS8xL3Bvc3RzIikudGhlbihmdW5jdGlvbiAocG9zdHMpIHsKICAgICAgcmV0dXJuIF90aGlzLnBvc3RzID0gcG9zdHNbImRhdGEiXTsKICAgIH0pOwogICAgYXhpb3MuZ2V0KCIvYXBpLzEvdXNlcnMiKS50aGVuKGZ1bmN0aW9uICh1c2VycykgewogICAgICByZXR1cm4gX3RoaXMudXNlcnMgPSB1c2Vyc1siZGF0YSJdOwogICAgfSk7CiAgICB0aGlzLiRyb290LiRvbigib25Mb2dvdXQiLCBmdW5jdGlvbiAoKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJqd3QiKTsKICAgICAgX3RoaXMudXNlciA9IG51bGw7CiAgICB9KTsKICAgIHRoaXMuJHJvb3QuJG9uKCJvbkp3dCIsIGZ1bmN0aW9uIChqd3QsIGVudGVyKSB7CiAgICAgIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMgPSB7CiAgICAgICAgQXV0aG9yaXphdGlvbjogIkJlYXJlciAiICsgand0CiAgICAgIH07CiAgICAgIGF4aW9zLmdldCgiL2FwaS8xL3VzZXJzL2F1dGhvcml6ZWQiKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLnVzZXIgPSByZXNwb25zZS5kYXRhOwoKICAgICAgICBpZiAoZW50ZXIpIHsKICAgICAgICAgIF90aGlzLiRyb290LiRlbWl0KCJvbkVudGVyU3VjY2VzcyIpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9KTsKICAgIHRoaXMuJHJvb3QuJG9uKCJvbkVudGVyIiwgZnVuY3Rpb24gKGxvZ2luLCBwYXNzd29yZCkgewogICAgICBheGlvcy5wb3N0KCIvYXBpLzEvand0IiwgewogICAgICAgIGxvZ2luOiBsb2dpbiwKICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiand0IiwgcmVzcG9uc2UuZGF0YSk7CgogICAgICAgIF90aGlzLiRyb290LiRlbWl0KCJvbkp3dCIsIHJlc3BvbnNlLmRhdGEsIHRydWUpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBfdGhpcy4kcm9vdC4kZW1pdCgib25FbnRlclZhbGlkYXRpb25FcnJvciIsIGVycm9yLnJlc3BvbnNlLmRhdGEpOwogICAgICB9KTsKICAgIH0pOwogICAgdGhpcy4kcm9vdC4kb24oIm9uUmVnaXN0ZXIiLCBmdW5jdGlvbiAobG9naW4sIG5hbWUpIHsKICAgICAgdmFyIFJlZ0V4cCA9IC9bYS16XSsvOwogICAgICB2YXIgaXNMb2dpblVuaXF1ZSA9IHRydWU7CiAgICAgIHZhciBsc3QgPSBsb2dpbi5zcGxpdChSZWdFeHApOwogICAgICB2YXIgY250ID0gMDsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbHN0Lmxlbmd0aDsgKytpKSB7CiAgICAgICAgaWYgKCEobHN0W2ldID09PSAiIikpIHsKICAgICAgICAgICsrY250OwogICAgICAgIH0KICAgICAgfQoKICAgICAgT2JqZWN0LmtleXMoX3RoaXMudXNlcnMpLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgaWYgKGxvZ2luID09PSBfdGhpcy51c2Vyc1t2YWx1ZV0ubG9naW4pIHsKICAgICAgICAgIGlzTG9naW5VbmlxdWUgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgaWYgKCFsb2dpbiB8fCBsb2dpbi5sZW5ndGggPCAzIHx8IGxvZ2luLmxlbmd0aCA+IDE2IHx8ICEoY250ID09PSAwKSkgewogICAgICAgIF90aGlzLiRyb290LiRlbWl0KCJvblJlZ2lzdGVyVmFsaWRhdGlvbkVycm9yIiwgIkxvZ2luIGlzIGludmFsaWQiKTsKICAgICAgfSBlbHNlIGlmICghaXNMb2dpblVuaXF1ZSkgewogICAgICAgIF90aGlzLiRyb290LiRlbWl0KCJvblJlZ2lzdGVyVmFsaWRhdGlvbkVycm9yIiwgIkxvZ2luIGlzIGluIHVzZSIpOwogICAgICB9IGVsc2UgaWYgKCFuYW1lIHx8IG5hbWUubGVuZ3RoIDwgMSB8fCBuYW1lLmxlbmd0aCA+IDMyKSB7CiAgICAgICAgX3RoaXMuJHJvb3QuJGVtaXQoIm9uUmVnaXN0ZXJWYWxpZGF0aW9uRXJyb3IiLCAiTmFtZSBpcyBpbnZhbGlkIik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIGlkID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgX3RvQ29uc3VtYWJsZUFycmF5KE9iamVjdC5rZXlzKF90aGlzLnVzZXJzKSkpICsgMTsKCiAgICAgICAgX3RoaXMuJHNldChfdGhpcy51c2VycywgaWQsIHsKICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgIGxvZ2luOiBsb2dpbiwKICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICBhZG1pbjogZmFsc2UKICAgICAgICB9KTsKICAgICAgfQogICAgfSk7CiAgfSwKICBiZWZvcmVNb3VudDogZnVuY3Rpb24gYmVmb3JlTW91bnQoKSB7CiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oImp3dCIpICYmICF0aGlzLnVzZXIpIHsKICAgICAgdGhpcy4kcm9vdC4kZW1pdCgib25Kd3QiLCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgiand0IiksIHRydWUpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["App.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n    <!--suppress HtmlUnknownTag -->\n    <body id=\"app\">\n    <Header :user=\"user\"/>\n    <Middle :posts=\"posts\" :users=\"users\"/>\n    <Footer/>\n    </body>\n</template>\n\n<script>\n    import Header from './components/Header'\n    import Middle from './components/Middle'\n    import Footer from './components/Footer'\n    import axios from 'axios'\n\n    export default {\n        name: 'app',\n        data: function () {\n            return {\n                user: null,\n                posts: [],\n                users: []\n            }\n        },\n        components: {\n            Header,\n            Middle,\n            Footer\n        }, beforeCreate() {\n            axios.get(\"/api/1/posts\").then(posts => this.posts = posts[\"data\"]);\n            axios.get(\"/api/1/users\").then(users => this.users = users[\"data\"]);\n\n            this.$root.$on(\"onLogout\", () => {\n                localStorage.removeItem(\"jwt\");\n                this.user = null;\n            });\n\n            this.$root.$on(\"onJwt\", (jwt, enter) => {\n                axios.defaults.headers = {\n                    Authorization: \"Bearer \" + jwt\n                };\n\n                axios.get(\"/api/1/users/authorized\").then(response => {\n                    this.user = response.data;\n                    if (enter) {\n                        this.$root.$emit(\"onEnterSuccess\");\n                    }\n                });\n            });\n\n            this.$root.$on(\"onEnter\", (login, password) => {\n                axios.post(\"/api/1/jwt\", {\n                    login: login,\n                    password: password\n                }).then(response => {\n                    localStorage.setItem(\"jwt\", response.data);\n                    this.$root.$emit(\"onJwt\", response.data, true);\n                }).catch(error => {\n                    this.$root.$emit(\"onEnterValidationError\", error.response.data);\n                });\n            });\n\n            this.$root.$on(\"onRegister\", (login, name) => {\n                const RegExp = /[a-z]+/;\n                let isLoginUnique = true;\n                let lst = login.split(RegExp);\n                let cnt = 0;\n                for (let i = 0; i < lst.length; ++i) {\n                    if (!(lst[i] === \"\")) {\n                        ++cnt;\n                    }\n                }\n\n                Object.keys(this.users).forEach(value => {\n                    if (login === this.users[value].login) {\n                        isLoginUnique = false;\n                    }\n                });\n\n                if (!login || (login.length < 3 || login.length > 16) || !(cnt === 0)) {\n                    this.$root.$emit(\"onRegisterValidationError\", \"Login is invalid\");\n                } else if (!isLoginUnique) {\n                    this.$root.$emit(\"onRegisterValidationError\", \"Login is in use\");\n                } else if (!name || (name.length < 1 || name.length > 32)) {\n                    this.$root.$emit(\"onRegisterValidationError\", \"Name is invalid\");\n                } else {\n                    const id = Math.max(...Object.keys(this.users)) + 1;\n                    this.$set(this.users, id, {\n                        id,\n                        login: login,\n                        name: name,\n                        admin: false\n                    });\n                }\n            });\n        }, beforeMount() {\n            if (localStorage.getItem(\"jwt\") && !this.user) {\n                this.$root.$emit(\"onJwt\", localStorage.getItem(\"jwt\"), true);\n            }\n        }\n    }\n</script>\n\n<style>\n</style>\n"],"sourceRoot":"src"}]}